webpackJsonp([23],{"2ZEU":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={data:()=>({user:{username:"",password:"",captcha_code:"",captcha_key:"",dev:"production",validate:""},passPoput:{bankcard:"",truename:"",user_name:"",password:"",openurl:"",phone:"",dev:"production"},codeImg:"",checkbox:!0,pullDownRefresh:!1,device:window.siteHeaders.device,isPass:!1,captchaIns:"null"}),computed:{webConfig(){return this.$store.state.webConfig}},created(){let t=window.localStorage.getItem("tol");if(t){let s=window.atob(t),e=window.location.origin;this.user.username=s.split(e)[0],this.user.password=s.split(e)[1]}},mounted(){this.$CodeWy(t=>{this.captchaIns=t},t=>{if(t){if(this.user.validate=t.validate,this.$loading.show(),this.checkbox){let t=window.btoa(this.user.username+window.location.origin+this.user.password);window.localStorage.setItem("tol",t)}else window.localStorage.removeItem("tol");this.$store.dispatch("USER_LOGIN",this.user).then(t=>{this.$Toast("登录成功"),this.$router.push("/")}).catch(t=>{5002==t.status_code&&(this.isPass=!0),this.captchaIns.refresh()})}else this.$Toast("验证失败")})},methods:{Login(){this.captchaIns.popUp()},Test(){this.$store.dispatch("USER_LOGIN",2).then(t=>{this.$Toast("您已进入试玩模式"),this.$router.push("/")})},GetCode(){this.$loading.show(),this.$api.Code({width:60,height:30}).then(t=>{this.user.captcha_key=t.captcha_key,this.codeImg=t.captcha_image,this.$loading.hidden()}).catch(t=>{})},OpenPc(){window.open(window.location.origin+"?device=APP")},validation(){this.passPoput.user_name=this.user.username,this.passPoput.password=this.user.password,this.passPoput.openurl=this.$getCookie("openUrl"),this.$store.commit("FRONT_END",this.passPoput.user_name),this.$loading.show(),this.$api.UserInfoPer(this.passPoput).then(t=>{this.isPass=!1,this.$setCookie("token",t.token_type+" "+t.access_token,t.expires_in),this.$store.commit("USER_STATE"),window.location.href.indexOf("device=APP")>=0&&device({data:t.access_token,type:"tokenClick"}),this.$router.push("/")})}}},a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"background",rawName:"v-background",value:"bg.png",expression:"'bg.png'"}],attrs:{id:"login"}},[e("div",{attrs:{id:"captcha"}}),t._v(" "),e("div",{staticClass:"logo"},[e("img",{attrs:{src:t.webConfig.logo_square},on:{click:function(s){return t.$router.push("/home")}}})]),t._v(" "),e("div",{staticClass:"body"},[e("list",{attrs:{pullDownRefresh:t.pullDownRefresh}},[e("div",[e("div",{staticClass:"input"},[e("p",{staticClass:"login_title"},[t._v("登入")]),t._v(" "),e("public-input",{attrs:{width:"260",height:"35",top:"0",radius:"15",placeholder:"账号",icon:"icon-wode",background:"#313131"},model:{value:t.user.username,callback:function(s){t.$set(t.user,"username","string"==typeof s?s.trim():s)},expression:"user.username"}}),t._v(" "),e("public-input",{attrs:{width:"260",height:"35",top:"0",radius:"15",placeholder:"密码",background:"#313131",icon:"icon-genggaimima",type:"password",look:""},model:{value:t.user.password,callback:function(s){t.$set(t.user,"password",s)},expression:"user.password"}}),t._v(" "),e("div",{staticClass:"forget",on:{click:function(s){return t.$router.push("/forget")}}},[t._v("忘记密码？")]),t._v(" "),e("div",{staticClass:"login_btn",on:{click:t.Login}},[t._v("登入")])],1),t._v(" "),e("router-link",{staticClass:"register",attrs:{to:"/register"}},[e("span",{staticClass:"iconfont icon-huiyuanzhuce"}),t._v("注册新用户\n        ")]),t._v(" "),e("p",{staticClass:"register",on:{click:t.Test}},[e("span",{staticClass:"iconfont icon-dianziyouxishi"}),t._v("免费试玩\n        ")]),t._v(" "),e("div",{staticClass:"return_home"},[e("router-link",{attrs:{to:"/home"}},[e("span",{staticClass:"iconfont icon-shouye1-copy"}),t._v("先逛逛")]),t._v(" "),"WAP"===t.device?e("p",{on:{click:t.OpenPc}},[e("span",{staticClass:"iconfont icon--pc"}),t._v("回到电脑版")]):t._e()],1)],1)])],1),t._v(" "),t.isPass?e("div",{staticClass:"passPoput",on:{click:function(s){if(s.target!==s.currentTarget)return null;t.isPass=!1}}},[e("div",{directives:[{name:"background",rawName:"v-background",value:"passPoputBg.png",expression:"'passPoputBg.png'"}],staticClass:"content"},[e("div",{staticClass:"title"},[t._v("账户存在风险")]),t._v(" "),e("div",{staticClass:"txt"},[t._v("为了保证您的信息安全，现在对您的账号进行验证")]),t._v(" "),e("div",{staticClass:"txt red"},[t._v("真实姓名为必填项")]),t._v(" "),e("public-input",{staticStyle:{border:"1px solid #e5e6e8"},attrs:{width:"90%",height:"32",top:"15",radius:"5",active:"",background:"#eff3f6",placeholder:"请输入真实姓名"},model:{value:t.passPoput.truename,callback:function(s){t.$set(t.passPoput,"truename",s)},expression:" passPoput.truename"}}),t._v(" "),e("div",{staticClass:"txt red"},[t._v("以下信息至少填写一项")]),t._v(" "),e("public-input",{staticStyle:{border:"1px solid #e5e6e8"},attrs:{width:"90%",height:"32",top:"15",radius:"5",active:"",background:"#eff3f6",placeholder:"请输入绑定银行卡号"},model:{value:t.passPoput.bankcard,callback:function(s){t.$set(t.passPoput,"bankcard",s)},expression:" passPoput.bankcard"}}),t._v(" "),e("public-input",{staticStyle:{border:"1px solid #e5e6e8"},attrs:{width:"90%",height:"32",top:"15",radius:"5",active:"",background:"#eff3f6",placeholder:"请输入绑定手机号码"},model:{value:t.passPoput.phone,callback:function(s){t.$set(t.passPoput,"phone",s)},expression:" passPoput.phone"}}),t._v(" "),e("div",{staticClass:"br"}),t._v(" "),e("div",{staticClass:"btn",on:{click:t.validation}},[t._v("验证")])],1),t._v(" "),e("i",{staticClass:"iconfont icon-closes",on:{click:function(s){t.isPass=!1}}})]):t._e()])},staticRenderFns:[]};var o=e("VU/8")(i,a,!1,function(t){e("BynT")},"data-v-65d95314",null);s.default=o.exports},BynT:function(t,s){}});