webpackJsonp([12],{J4DG:function(t,e){},d3Mh:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("mtWM");var i={data:()=>({contents:"",list:[],message:{}}),created(){this.$loading.show(),this.getContents()},methods:{scollDown(t){this.$loading.show(),this.getContents().then(()=>{t()})},getContents(){return new Promise((t,e)=>{this.$api.MessageReplyContents({mail_id:this.$route.query.id}).then(e=>{e.info.map((t,e)=>{this.$time(new Date,3)==this.$time(new Date(1e3*t.time),3)?t.time=this.$time(new Date(1e3*t.time),2):t.time=this.$time(new Date(1e3*t.time),4)}),this.list=e.info,t()})})},send(){this.$loading.show(),this.getMessage().then(()=>{this.message.user_count>=this.message.is_count?this.$Toast({message:"抱歉,已达到发送次数上限"}):(this.$loading.show(),this.$api.MessageReply({mail_id:this.$route.query.id,contents:this.contents}).then(t=>{this.contents="",this.getContents().then(()=>{this.$Toast({message:t.message})})}))})},getMessage(){return new Promise((t,e)=>{this.$api.MessageList({currentPage:1,currentPageTotal:100}).then(e=>{e.items.map(t=>{t.check=!1,t.id==this.$route.query.id&&(this.message=t)}),t(e)})})}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"messageKf"}},[s("public-header",{attrs:{back:"",title:"咨询客服"}}),t._v(" "),s("div",{staticClass:"list"},[s("div",{staticClass:"message"},[s("list",{attrs:{pullDownRefresh:!0},on:{scollDown:t.scollDown}},[s("ul",t._l(t.list,function(e,i){return s("li",{key:i,staticClass:"mesList",class:{user:"USER"==e.operator}},[s("div",{staticClass:"content"},[s("div",{staticClass:"time"},["USER"!=e.operator?s("span",[t._v("管理员")]):t._e(),t._v(" "),s("span",[t._v(t._s(e.time))])]),t._v(" "),s("div",{staticClass:"body",domProps:{innerHTML:t._s(e.body)}})])])}),0)])],1),t._v(" "),s("div",{staticClass:"replyInput"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.contents,expression:"contents"}],attrs:{type:"text",placeholder:"请输入信息....."},domProps:{value:t.contents},on:{input:function(e){e.target.composing||(t.contents=e.target.value)}}}),t._v(" "),s("div",{staticClass:"send_btn",on:{click:t.send}},[s("img",{directives:[{name:"src",rawName:"v-src",value:"fasong.png",expression:"'fasong.png'"}]})])])])],1)},staticRenderFns:[]};var a=s("VU/8")(i,n,!1,function(t){s("J4DG")},"data-v-d3999c1e",null);e.default=a.exports}});