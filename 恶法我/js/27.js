webpackJsonp([27],{"/peZ":function(s,e){},CDqz:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:()=>({messageList:[],active:99999,listActive:1,allchecked:!1,noMessage:"",mesShow:!1,mesDetail:{},detailShow:!1,tagvalue:""}),computed:{},watch:{},created(){this.$loading.show(),this.GetMessage()},mounted(){},methods:{getNav(s){this.mesShow=!1,this.listActive=s,this.$loading.show(),this.GetMessage()},scollDown(s){this.mesShow=!1,this.$loading.show(),this.GetMessage().then(()=>{s()})},getDetail(s){let e=JSON.stringify(s);localStorage.setItem("message",e),localStorage.setItem("tagvalue",this.tagvalue),1==s.is_read&&this.ReadMessage(s.id),this.$router.push("/userNewsList")},dedle(s){this.$loading.show(),this.$api.DelMessage({id:s.id}).then(s=>{this.$loading.show(),this.GetMessage().then(()=>{this.$Toast("删除成功")})}).catch(s=>{})},ReadMessage(s){return new Promise((e,t)=>{this.$api.Read({id:s}).then(s=>{e(s),this.GetMessage()}).catch(s=>{t(s)})})},GetMessage(){return this.messageList=[],new Promise((s,e)=>{this.$api.MessageList({currentPage:1,currentPageTotal:100}).then(e=>{e.config&&(this.tagvalue=e.config.tagvalue),0==e.total&&(this.mesShow=!0),e.items.map(s=>{s.check=!1,1==this.listActive&&this.messageList.push(s),2==this.listActive&&1==s.is_read&&this.messageList.push(s),3==this.listActive&&2==s.is_read&&this.messageList.push(s),this.messageList.length>0?this.mesShow=!1:this.mesShow=!0}),s()})})}}},a={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{attrs:{id:"user_news"}},[t("public-header",{attrs:{back:"",title:"站内信"}}),s._v(" "),t("div",{staticClass:"mes_nav"},[t("ul",[t("li",{class:{listActive:1==s.listActive},on:{click:function(e){return s.getNav(1)}}},[s._v("全部")]),s._v(" "),t("li",{class:{listActive:2==s.listActive},on:{click:function(e){return s.getNav(2)}}},[s._v("未读")]),s._v(" "),t("li",{class:{listActive:3==s.listActive},on:{click:function(e){return s.getNav(3)}}},[s._v("已读")])])]),s._v(" "),t("div",{staticClass:"message"},[t("list",{attrs:{pullDownRefresh:!0},on:{scollDown:s.scollDown}},[t("div",{staticClass:"user_message_box"},[s._l(s.messageList,function(e,i){return t("div",{directives:[{name:"move",rawName:"v-move"}],key:i,staticClass:"message_list"},[t("div",{staticClass:"message_title",on:{click:function(t){return s.getDetail(e)}}},[t("p",{staticClass:"time"},[t("span",[s._v(s._s(s.$time(new Date(1e3*e.add_time))))]),s._v(" "),1==e.is_read||1==e.is_state?t("b",{staticClass:"readIcon"}):s._e()]),s._v(" "),t("div",{staticClass:"title_box"},[s._v("\n              "+s._s(e.title)+"\n            ")])]),s._v(" "),t("div",{staticClass:"del",attrs:{"data-side":!0},on:{click:function(t){return s.dedle(e)}}},[s._v("删除")])])}),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.mesShow,expression:"mesShow"}],staticClass:"no_message"},[t("span",[s._v("暂无站内信")])])],2)])],1),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.detailShow,expression:"detailShow"}],staticClass:"mesDetail",on:{click:function(e){if(e.target!==e.currentTarget)return null;s.detailShow=!1}}},[t("div",{staticClass:"content"},[t("div",{staticClass:"detail"},[t("div",{staticClass:"title"},[t("div",{staticClass:"txt"},[s._v(s._s(s.mesDetail.title))]),s._v(" "),t("div",{staticClass:"time"},[s._v("\n            "+s._s(s.$time(new Date(1e3*s.mesDetail.add_time)))+"\n            "),1==s.tagvalue&&1==s.mesDetail.is_hudong?t("span",{on:{click:function(e){return s.$router.push({path:"/messageKf",query:{id:s.mesDetail.id}})}}},[s._v("\n              咨询客服\n              "),1==s.mesDetail.is_state?t("i",{staticClass:"newMes"}):s._e()]):s._e()])]),s._v(" "),t("div",{staticClass:"body",domProps:{innerHTML:s._s(s.mesDetail.body)}})]),s._v(" "),t("div",{staticClass:"close_btn",on:{click:function(e){s.detailShow=!1}}},[t("i",{staticClass:"iconfont icon-tubiao-"})])])])],1)},staticRenderFns:[]};var l=t("VU/8")(i,a,!1,function(s){t("/peZ")},"data-v-52328fee",null);e.default=l.exports}});